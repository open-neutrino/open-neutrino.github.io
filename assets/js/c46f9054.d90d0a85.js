"use strict";(self.webpackChunkneutrino=self.webpackChunkneutrino||[]).push([[6314],{3257:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"installation/software-support","title":"Software Support","description":"Current software support mainly targets AI/ML workloads,","source":"@site/docs/installation/software-support.mdx","sourceDirName":"installation","slug":"/installation/software-support","permalink":"/docs/installation/software-support","draft":false,"unlisted":false,"editUrl":"https://github.com/neutrino-gpu/neutrino/docs/docs/installation/software-support.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Hardware Support","permalink":"/docs/installation/hardware-support"},"next":{"title":"Docker Installation","permalink":"/docs/installation/docker-installation"}}');var i=n(4848),r=n(8453);const c={sidebar_position:3},o="Software Support",a={},l=[{value:"cuBLAS/cuDNN",id:"cublascudnn",level:3},{value:"PyTorch",id:"pytorch",level:3},{value:"JAX/XLA",id:"jaxxla",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"software-support",children:"Software Support"})}),"\n",(0,i.jsxs)(t.p,{children:["Current software support mainly targets AI/ML workloads,\nand we are welcome contribution on testing ",(0,i.jsx)(t.code,{children:"neutrino"})," on other frameworks and workloads.\nSupport Matrix are summarized below"]}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Framework"}),(0,i.jsx)(t.th,{children:"Status"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"cuBLAS/cuFFT/cuSparse..."}),(0,i.jsx)(t.td,{children:"\u274c (no plan for supporting)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"CUTLASS"}),(0,i.jsx)(t.td,{children:"\u2705 (with macro in building)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"PyTorch"}),(0,i.jsx)(t.td,{children:"\u2705 (with manual building)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"JAX"}),(0,i.jsx)(t.td,{children:"\u2705 (with envriable)"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Triton"}),(0,i.jsx)(t.td,{children:"\u2705"})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"Taichi"}),(0,i.jsx)(t.td,{children:"\u2705"})]})]})]}),"\n",(0,i.jsxs)(t.p,{children:["Due to the uniqueness of ",(0,i.jsx)(t.code,{children:"neutrino"}),", some special arangements might be applied for correct functioning for each framework:"]}),"\n",(0,i.jsx)(t.h3,{id:"cublascudnn",children:"cuBLAS/cuDNN"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"neutrino"})," does not support these NVIDIA propietary product for several reason:"]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["NVIDIA updates its ",(0,i.jsx)(t.a,{href:"https://docs.nvidia.com/cuda/eula/index.html",children:"EULA"})," on decompile/disassemble these propietary products."]}),"\n",(0,i.jsxs)(t.li,{children:["These propietary product heavily used ",(0,i.jsx)(t.a,{href:"https://news.ycombinator.com/item?id=39346108",children:"dark apis"}),", which is out of the scope."]}),"\n",(0,i.jsx)(t.li,{children:"Even observation is made, optimization by developers are impossible as they are closed source."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Unfortunately, some drawbacks from not supporting cuBLAS/cuFFT:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["PyTorch's ",(0,i.jsx)(t.code,{children:"nn.Linear"})," and other matmul / conv operations can not be traced -> consider using ",(0,i.jsx)(t.code,{children:"CUTLASS"})," instead."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"pytorch",children:"PyTorch"}),"\n",(0,i.jsxs)(t.p,{children:["Support for PyTorch requires modifying a line in its ",(0,i.jsx)(t.code,{children:"CMakeLists.txt"})," and for simplicity, we provide pre-built wheels hosted in Cloudfare R2:"]}),"\n",(0,i.jsxs)(t.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",checked:!0,disabled:!0})," ","SM_75: ",(0,i.jsx)(t.a,{href:"https://pub-eef24bf0aa5b4950860ea28dfbe39d8c.r2.dev/sm_75/torch/torch-2.5.0-cp311-cp311-linux_x86_64.whl",children:"https://pub-eef24bf0aa5b4950860ea28dfbe39d8c.r2.dev/sm_75/torch/torch-2.5.0-cp311-cp311-linux_x86_64.whl"})]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",checked:!0,disabled:!0})," ","SM_80: ",(0,i.jsx)(t.a,{href:"https://pub-eef24bf0aa5b4950860ea28dfbe39d8c.r2.dev/sm_80/torch/torch-2.5.0-cp311-cp311-linux_x86_64.whl",children:"https://pub-eef24bf0aa5b4950860ea28dfbe39d8c.r2.dev/sm_80/torch/torch-2.5.0-cp311-cp311-linux_x86_64.whl"})]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",checked:!0,disabled:!0})," ","SM_86: ",(0,i.jsx)(t.a,{href:"https://pub-eef24bf0aa5b4950860ea28dfbe39d8c.r2.dev/sm_86/torch/torch-2.5.0-cp311-cp311-linux_x86_64.whl",children:"https://pub-eef24bf0aa5b4950860ea28dfbe39d8c.r2.dev/sm_86/torch/torch-2.5.0-cp311-cp311-linux_x86_64.whl"})]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",checked:!0,disabled:!0})," ","SM_89: ",(0,i.jsx)(t.a,{href:"https://pub-eef24bf0aa5b4950860ea28dfbe39d8c.r2.dev/sm_89/torch/torch-2.5.0-cp311-cp311-linux_x86_64.whl",children:"https://pub-eef24bf0aa5b4950860ea28dfbe39d8c.r2.dev/sm_89/torch/torch-2.5.0-cp311-cp311-linux_x86_64.whl"})]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","SM_90"]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","GFX900x  (AMD CDNA)"]}),"\n",(0,i.jsxs)(t.li,{className:"task-list-item",children:[(0,i.jsx)(t.input,{type:"checkbox",disabled:!0})," ","GFX1000x (AMD RDNA)"]}),"\n"]}),"\n",(0,i.jsxs)(t.admonition,{type:"info",children:[(0,i.jsx)(t.p,{children:"Currently links are anonymoused as we're in Artifact Evaluation."}),(0,i.jsx)(t.p,{children:"We are working on maintaining a pip source for better user experience. Stay tuned!"})]}),"\n",(0,i.jsx)(t.p,{children:"Support for PyTorch requries manual building to store PTX Assembly in installation (by default, PyTorch keeps only SASS):"}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["Clone the PyTorch: ",(0,i.jsx)(t.code,{children:"git clone --recursive https://github.com/pytorch/pytorch"}),", add ",(0,i.jsx)(t.code,{children:"--branch"})," to specify branch if need"]}),"\n",(0,i.jsxs)(t.li,{children:["Following the ",(0,i.jsx)(t.a,{href:"https://github.com/pytorch/pytorch?tab=readme-ov-file#install-dependencies",children:"guide"})," to install dependnecies."]}),"\n",(0,i.jsxs)(t.li,{children:["Query compute capability via ",(0,i.jsx)(t.code,{children:"nvidia-smi --query-gpu=compute_cap --format=csv,noheader"})]}),"\n",(0,i.jsxs)(t.li,{children:["Modify the fatbin setting and add NVCC flags in ",(0,i.jsx)(t.code,{children:"pytorch/CMakeLists.txt"}),", see below code block."]}),"\n",(0,i.jsxs)(t.li,{children:["Follow the ",(0,i.jsx)(t.a,{href:"https://github.com/pytorch/pytorch?tab=readme-ov-file#install-pytorch",children:"guide"})," to build and install PyTorch with ",(0,i.jsx)(t.code,{children:"+PTX"})," in TORCH_CUDA_ARCH_LIST like ",(0,i.jsx)(t.code,{children:'TORCH_CUDA_ARCH_LIST="8.0+PTX"'}),"."]}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-cmake",metastring:'title="pytorch/CMakeLists.txt, around line 660"',children:'// REMOVE NEXT LINE\n- string(APPEND CMAKE_CUDA_FLAGS " -Xfatbin -compress-all")\n// ADD NEXT LINE\n+ string(APPEND CMAKE_CUDA_FLAGS " -Xfatbin --compress=false")\n'})}),"\n",(0,i.jsx)(t.h3,{id:"jaxxla",children:"JAX/XLA"}),"\n",(0,i.jsx)(t.p,{children:"Simply add an envrironment variable when executing the XLA program:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"XLA_FLAGS=--xla_gpu_generate_line_info='true' <JAX/XLA Program>\n"})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>o});var s=n(6540);const i={},r=s.createContext(i);function c(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);