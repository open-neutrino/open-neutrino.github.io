<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-probes/trace" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Trace and Analysis | Neutrino</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://neutrino-gpu.github.io/img/neutrino-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://neutrino-gpu.github.io/img/neutrino-social-card.jpg"><meta data-rh="true" property="og:url" content="https://neutrino-gpu.github.io/docs/probes/trace"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Trace and Analysis | Neutrino"><meta data-rh="true" name="description" content="This page is converted from the Jupyter Notebook, and we&#x27;re optimizing the layout of this page."><meta data-rh="true" property="og:description" content="This page is converted from the Jupyter Notebook, and we&#x27;re optimizing the layout of this page."><link data-rh="true" rel="icon" href="/static/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://neutrino-gpu.github.io/docs/probes/trace"><link data-rh="true" rel="alternate" href="https://neutrino-gpu.github.io/docs/probes/trace" hreflang="en"><link data-rh="true" rel="alternate" href="https://neutrino-gpu.github.io/docs/probes/trace" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Neutrino RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Neutrino Atom Feed"><link rel="stylesheet" href="/assets/css/styles.2364c40d.css">
<script src="/assets/js/runtime~main.eff10e97.js" defer="defer"></script>
<script src="/assets/js/main.0ee8bd85.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Neutrino Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Neutrino Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Neutrino</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/neutrino-gpu/neutrino" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/difference">How Neutrino differs from ...</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/installation-and-support">Installation and Support</a><button aria-label="Expand sidebar category &#x27;Installation and Support&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/programmable-probes">Programmable Probes</a><button aria-label="Collapse sidebar category &#x27;Programmable Probes&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/probes/example">Writing Probes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/probes/model">Probe Execution Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/probes/trace">Trace and Analysis</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/reference-and-internals">Reference and Internals</a><button aria-label="Expand sidebar category &#x27;Reference and Internals&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/dmat">DMAT Visualization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/roadmap">Limitation and Roadmap</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/programmable-probes"><span itemprop="name">Programmable Probes</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Trace and Analysis</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Trace and Analysis</h1></header>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>This page is converted from the Jupyter Notebook, and we&#x27;re optimizing the layout of this page.</p></div></div>
<p>Now, after finishing the probing, we can explore the trace structure and perform analysis.
As a versatile system, Neutrino trace is not just a simple file and we formulate it into a organized &quot;file system&quot;:</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="structure-overview">Structure Overview<a href="#structure-overview" class="hash-link" aria-label="Direct link to Structure Overview" title="Direct link to Structure Overview">​</a></h2>
<p>First, traces will be placed under <code>NEUTRINO_TRACEDIR</code> (configurable via <code>--trace</code>), which is default to be <code>./trace</code>. By <code>ls</code> we can see traces arranged in order:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./trace&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[&#x27;Apr25_114624_1921397&#x27;]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Each directory corresponding to traces of a run and it&#x27;s named by the time and pid.
For example <code>Apr24_231539_1860576</code> means it&#x27;s a run at:</p>
<ul>
<li>April 24, 23:15:39, of your local timezone</li>
<li>PID of this process is 1860576</li>
</ul>
<p>The use of <code>pid</code> is due to the process-independent design of Neutrino that if your program uses multiple process, there&#x27;ll be multiple trace dir distinguished by the <code>pid</code>.</p>
<p>Now we start to explore content of each trace. Probably the latest one.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># CITE https://stackoverflow.com/questions/9727673/list-directory-tree-structure-in-python</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># !sudo apt install tree # run this if your system don&#x27;t have tree</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">tracedir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./trace&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token operator" style="color:#393A34">-</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!tree </span><span class="token string" style="color:#e3116c">&quot;./trace/{tracedir}&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># an undocumented trick</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    ./trace/Apr25_114624_1921397</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── event.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── kernel</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │   └── 0_bf524e8c48fdebc3962c3b36823d8d68b093ebb6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       ├── kernel.info</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       ├── original.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       ├── original.ptx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       ├── probed.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       ├── probed.ptx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       ├── process.log</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       ├── pruned.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    │       └── pruned.ptx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── probe.toml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── result</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        └── 0.660526.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    3 directories, 11 files</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here you can find:</p>
<ul>
<li><code>probe.toml</code>: a copy of probe code shown above, useful for repeating the experiment.</li>
<li><code>event.log</code>: an important log of all the events captured by Hook Driver (Sec.4.1)</li>
<li><code>kernel</code>: a folder containing all kernels captured and processed by Neutrino.</li>
<li><code>result</code>: a folder containing all traces dumped</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="eventlog-from-hook-driver">event.log from hook driver<a href="#eventlog-from-hook-driver" class="hash-link" aria-label="Direct link to event.log from hook driver" title="Direct link to event.log from hook driver">​</a></h2>
<p>Now let&#x27;s deep dive into the <code>event.log</code>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!cat </span><span class="token string" style="color:#e3116c">&quot;./trace/{tracedir}/event.log&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    [pid] 1921397</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [cmd] 26 python block_sched/raw.py </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [info] dl 0x27c4350</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [info] init success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [mem] cuMemAlloc_v2 0 dptr 7f3234000000 bytesize 33554432</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [mod] cuLibraryLoadData 0 lib 0x8ba3040 code 0x7f33949cba28 type warpped_fatbin size 4962432</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [mod] cuLibraryGetModule 0 mod 0x871e410 lib 0x8ba3040</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [mod] cuModuleGetFunction func 0x90c68e0 mod 0x871e410 name _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [exec] funcmap-not-find 0x90c68e0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [jit] find 0x90c68e0 name _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_ bin 0x7f32407e4010 size 4962432</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [jit] rename _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_ 0_bf524e8c48fdebc3962c3b36823d8d68b093ebb6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [jit] mkdir ./trace/Apr25_114624_1921397/kernel/0_bf524e8c48fdebc3962c3b36823d8d68b093ebb6</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [jit] write ./trace/Apr25_114624_1921397/kernel/0_bf524e8c48fdebc3962c3b36823d8d68b093ebb6/original.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [jit] subproc /home/root/anaconda3/envs/testenv/bin/python /home/root/anaconda3/envs/testenv/lib/python3.11/site-packages/neutrino/probe/cuda.py ./trace/Apr25_114624_1921397/kernel/0_bf524e8c48fdebc3962c3b36823d8d68b093ebb6 _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [jit] python succeed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [jit] read ./trace/Apr25_114624_1921397/kernel/0_bf524e8c48fdebc3962c3b36823d8d68b093ebb6/kernel.info name _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_ n_param 3 n_probe 1 trace_hook /home/root/anaconda3/envs/testenv/lib/python3.11/site-packages/neutrino/tools/block_sched.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [jit] finish 0x90c68e0 name _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_ n_param 3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [exec] funcmap-find 0x90c68e0 success</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [exec] 1745552787265925120 param 1000000 10000000000 7f3234000000 </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [exec] grid 32768 1 1 block 128 1 1 shared 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [exec] grid 32768 warp  4 probe 16 total 2097152</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [exec] probe-mem 2097152 (bytes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [exec] succeed 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [exec] save ./trace/Apr25_114624_1921397/result/0.660526.bin size 2097200</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [exec] prologue 211.571716 kernel 0.059392 epilogue 2.958016 ratio 3613.098145</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [analyze] subproc /home/root/anaconda3/envs/testenv/bin/python /home/root/anaconda3/envs/testenv/lib/python3.11/site-packages/neutrino/tools/block_sched.py ./trace/Apr25_114624_1921397/result/0.660526.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [analyze] succeed</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let&#x27;s break it down line to line. Note that pointers will change from run to run, just for illustration:</p>
<ol>
<li><code>[pid] 1860576</code> records the pid of this process</li>
<li><code>[cmd] 26 python block_sched/raw.py</code> records the command line, useful for classifying traces.</li>
<li><code>[info] dl 0x26aa350</code> and <code>[info] init success</code> records the status of Hook Driver initialization for internal checking.</li>
<li><code>[mem]</code> records the <a href="https://docs.nvidia.com/cuda/cuda-driver-api/group__CUDA__MEM.html#group__CUDA__MEM" target="_blank" rel="noopener noreferrer">memory operations</a>, useful for checking illegal memory access. For example, here it states driver sucessfully (return code 0) allocate 33554432 bytes GMEM at ptr 0x7fdf78000000.</li>
<li><code>[mod]</code> records the <a href="https://docs.nvidia.com/cuda/cuda-driver-api/group__CUDA__MODULE.html#group__CUDA__MODULE" target="_blank" rel="noopener noreferrer">module operations</a>, useful for checking GPU code. For example, here it states a function named <code>_ZN2at6native29vectorized_elementwise_kernel...</code> was first loaded via <code>cuLibraryLoadData</code> from a <a href="https://developer.nvidia.com/blog/cuda-pro-tip-understand-fat-binaries-jit-caching/" target="_blank" rel="noopener noreferrer">fatbinary</a> and lowered via <code>cuLibraryGetModule</code> and <code>cuModuleGetFunction</code>.</li>
<li><code>[exec] funcmap-not-find</code> states internal function storage don&#x27;t find the JIT record. This happens for every first-seen code and will trigger JIT probing.</li>
<li><code>[jit]</code> records the interaction with probe engines. First it states kernel was <code>find</code> from binary storage and was <code>rename</code> to SHA1. Next, a folder is created under <code>kernel</code> dir and the code was written to <code>original.bin</code>. Then a subprocess is forked to launch the probe engine and we wait for the status.</li>
<li><code>[exec]</code> records the execution of probing engine.</li>
<li><code>[analyze]</code></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="kernel-by-probing-engine">kernel/ by probing engine<a href="#kernel-by-probing-engine" class="hash-link" aria-label="Direct link to kernel/ by probing engine" title="Direct link to kernel/ by probing engine">​</a></h2>
<p>Each directory under <code>kernel/</code> corresponds to a kernel and is named by the SHA1 of kernel name with an indexed prefix for referencing.</p>
<p>And under each kernel dir, there will be a <code>original.bin</code> dumped by hook driver and all the rest are created by hooked driver.
The probe engine follows following steps:</p>
<ol>
<li><code>objdump original.bin</code> to extrace assembly into <code>original.ptx</code>. Warning: <code>original.ptx</code> can be LARGE because many kernels are fused into one file.</li>
<li>Prune the asm by the kernel name (provided as <code>sys.argv[-1]</code>, see above <code>[exec] subproc</code>) and save to <code>pruned.ptx</code> for checking.</li>
<li>Probe the asm by the probe in <code>NEUTRINO_PROBE</code> envariable and save it to <code>probed.ptx</code></li>
<li><code>assemble</code> the <code>pruned.ptx</code> and <code>probed.ptx</code> into <code>.bin</code> of binary machine code.</li>
<li>Write the <code>kernel.info</code> for the hooked driver to read the enough metadata for <code>[exec]</code>.</li>
</ol>
<p>Moreover, the probed engine will writes all the log into <code>process.log</code>, let&#x27;s take a look first.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kernel_dir </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">listdir</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;./trace/</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">tracedir</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">/kernel&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># will be 0_xxx</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!cat </span><span class="token string" style="color:#e3116c">&quot;./trace/{tracedir}/kernel/{kernel_dir}/process.log&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    [&#x27;&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    [decompile] via cuobjdump -ptx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ptxas -arch=sm_80 -m64 --verbose ./trace/Apr25_114624_1921397/kernel/0_bf524e8c48fdebc3962c3b36823d8d68b093ebb6/probed.ptx -o ./trace/Apr25_114624_1921397/kernel/0_bf524e8c48fdebc3962c3b36823d8d68b093ebb6/probed.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ptxas info    : 367 bytes gmem, 200 bytes cmem[4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ptxas info    : Compiling entry function &#x27;_ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_&#x27; for &#x27;sm_80&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ptxas info    : Function properties for _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ptxas info    : Used 18 registers, 376 bytes cmem[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ptxas -arch=sm_80 -m64 --verbose ./trace/Apr25_114624_1921397/kernel/0_bf524e8c48fdebc3962c3b36823d8d68b093ebb6/pruned.ptx -o ./trace/Apr25_114624_1921397/kernel/0_bf524e8c48fdebc3962c3b36823d8d68b093ebb6/pruned.bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ptxas info    : 367 bytes gmem, 200 bytes cmem[4]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ptxas info    : Compiling entry function &#x27;_ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_&#x27; for &#x27;sm_80&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ptxas info    : Function properties for _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        0 bytes stack frame, 0 bytes spill stores, 0 bytes spill loads</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ptxas info    : Used 12 registers, 368 bytes cmem[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # Neutrino Auto-Generated Code for Trace Reading</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    import struct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from typing import NamedTuple, List, Tuple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from neutrino import TraceHeader, TraceSection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    class block_sched(NamedTuple):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    	lstart: int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    	elapse: int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    	smid: int</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    def parse(path: str) -&gt; Tuple[TraceHeader, List[TraceSection], List[List[block_sched]]]:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        with open(path, &quot;rb&quot;) as f:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            gridDimX, gridDimY, gridDimZ, blockDimX, blockDimY, blockDimZ, sharedMemBytes, numProbes = struct.unpack(&quot;iiiiiiii&quot;, f.read(32))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            header: TraceHeader = TraceHeader(gridDimX, gridDimY, gridDimZ, blockDimX, blockDimY, blockDimZ, sharedMemBytes, numProbes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            assert header.numProbes == 1 # currently only one saving probe is supported</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sections: List[TraceSection] = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for _ in range(header.numProbes):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                size, offset = struct.unpack(&quot;QQ&quot;, f.read(16))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                sections.append(TraceSection(size, offset))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            gridSize = header.gridDimX * header.gridDimY * header.gridDimZ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            blockSize = header.blockDimX * header.blockDimY * header.blockDimZ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            records: List[List[block_sched]] = []</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            for i in range(gridSize):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                records.append([])</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                for j in range(blockSize//32):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    lstart, elapse, smid = struct.unpack(&quot;QII&quot;, f.read(16))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    records[i].append(block_sched(lstart, elapse, smid))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return header, sections, records</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Let&#x27;s break it from top to down:</p>
<ul>
<li>First line is the kernel filtering information (set via <code>--filter</code>/<code>--kernel</code>). It&#x27;s empty here because we don&#x27;t set anything.</li>
<li>Second line is the <code>objdump</code> information, stating the command used to dump the code.</li>
<li>Third line is the kernel name being used.</li>
<li>Then it&#x27;s the command and logs of assembler (<code>ptxas</code> for NVIDIA). Please pay special attention to the last line stating no.registers used (for producing Table. 2) and constant memroy <code>cmem[0]</code> (used for kernel parameters, here Neutrino use 8 bytes more for a 64bit pointer).</li>
<li>Finally is the auto-generated Python code for trace reading conforming Sec. 4.4, helpful for building trace analysis tools, detailed presented in answering the 3rd question.</li>
</ul>
<p>And when the probing engine fails, it will also print out the trace back tree here for analysis, like this:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[&#x27;&#x27;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[decompile] via cuobjdump -ptx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Traceback (most recent call last):</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File &quot;/home/root/anaconda3/envs/testenv/lib/python3.11/site-packages/neutrino/probe/cuda.py&quot;, line 747, in &lt;module&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    probed_ptx, probe_mem_sizes, trace_reading_code = probing(entry_section, probes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  File &quot;/home/root/anaconda3/envs/testenv/lib/python3.11/site-packages/neutrino/probe/cuda.py&quot;, line 507, in probing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    in3:  str = operands[3] if len(operands) &gt;= 4 else None</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ^^^</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">UnboundLocalError: cannot access local variable &#x27;out&#x27; where it is not associated with a value</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We build the probe engine in Python so you can easily debug and extend new functionalities if the current cannot fulfill your need.</p>
<p>Moreover, <code>process.log</code> is for huamn-reading, another log for the hook driver to read back is the <code>kernel.info</code>.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!cat </span><span class="token string" style="color:#e3116c">&quot;./trace/{tracedir}/kernel/{kernel_dir}/kernel.info&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    1,16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /home/root/anaconda3/envs/testenv/lib/python3.11/site-packages/neutrino/tools/block_sched.py</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_0,u32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_1[2],align</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_2[8],align</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>From top to down, <code>kernel.info</code> contains:</p>
<ul>
<li>First line is the kernel name, like <code>_ZN2at6native29vectorized_elementwise_kernel...</code></li>
<li>Second line is the number of original kernel parameters, like 3.</li>
<li>Third line is the number of probes <em>saving records</em>, here is 1. Then it&#x27;s <code>n=1</code> lines followed containing the datamodel, of type (<code>0:=thread/1:=warp</code>) and bytes, 16 here, saved for each thread/warp.</li>
<li>Later, there&#x27;ll be a line containing optional analyze hook, like <code>block_sched.py</code> here.</li>
</ul>
<p>These will be parsed by the hook driver for execution usage (<code>[exec]</code>).</p>
<p>Finally, we can take a look at the difference of <code>pruned.ptx</code> and <code>probed.ptx</code>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!cat </span><span class="token string" style="color:#e3116c">&quot;./trace/{tracedir}/kernel/{kernel_dir}/pruned.ptx&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    .version 8.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .target sm_80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .address_size 64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .extern .func __assertfail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .b64 __assertfail_param_0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .b64 __assertfail_param_1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .b32 __assertfail_param_2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .b64 __assertfail_param_3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .b64 __assertfail_param_4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_1[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_2[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_3[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_4[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_5[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_6[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_7[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_8[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_9[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_10[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_11[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_12[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_13[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_14[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_15[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_16[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_17[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_18[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_19[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_20[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 _ZN44_INTERNAL_14555b67_13_FillKernel_cu_e561d9726thrust20THRUST_200302_800_NS6system6detail10sequential3seqE[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 _ZN44_INTERNAL_14555b67_13_FillKernel_cu_e561d9724cuda3std3__48in_placeE[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 _ZN44_INTERNAL_14555b67_13_FillKernel_cu_e561d9724cuda3std6ranges3__45__cpo4swapE[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 $str$5[6] = {102, 97, 108, 115, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 $str$6[58] = {47, 104, 111, 109, 101, 47, 104, 117, 97, 110, 103, 115, 48, 47, 119, 111, 114, 107, 100, 105, 114, 47, 100, 105, 115, 116, 47, 112, 121, 116, 111, 114, 99, 104, 47, 99, 49, 48, 47, 99, 111, 114, 101, 47, 68, 121, 110, 97, 109, 105, 99, 67, 97, 115, 116, 46, 104};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .visible .entry _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .u32 _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .align 2 .b8 _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_1[2],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .align 8 .b8 _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_2[8]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .maxntid 128, 1, 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .pred %p&lt;6&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b16 %rs&lt;2&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b32 %r&lt;19&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b64 %rd&lt;15&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.param.u16 %rs1, [_ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.param.u64 %rd2, [_ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_2];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.param.u32 %r4, [_ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov.u32 %r5, %ctaid.x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shl.b32 %r1, %r5, 9;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sub.s32 %r2, %r4, %r1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setp.lt.s32 %p1, %r2, 512;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cvta.to.global.u64 %rd1, %rd2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%p1 bra $L__BB66_2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bra.uni $L__BB66_1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $L__BB66_2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov.u32 %r7, %tid.x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setp.ge.s32 %p2, %r7, %r2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r3, %r7, 384;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%p2 bra $L__BB66_7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r9, %r7, 128;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setp.ge.s32 %p3, %r9, %r2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r10, %r7, %r1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.u32 %rd7, %r10, 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd8, %rd1, %rd7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.global.u16 [%rd8], %rs1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%p3 bra $L__BB66_7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r12, %r7, 256;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setp.ge.s32 %p4, %r12, %r2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r14, %r10, 128;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.u32 %rd9, %r14, 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd10, %rd1, %rd9;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.global.u16 [%rd10], %rs1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%p4 bra $L__BB66_7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r17, %r10, 256;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.u32 %rd11, %r17, 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd12, %rd1, %rd11;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.global.u16 [%rd12], %rs1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setp.ge.s32 %p5, %r3, %r2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%p5 bra $L__BB66_7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r18, %r3, %r1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.u32 %rd13, %r18, 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd14, %rd1, %rd13;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.global.u16 [%rd14], %rs1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bra.uni $L__BB66_7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $L__BB66_1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.s32 %rd3, %r1, 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd4, %rd1, %rd3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov.u32 %r6, %tid.x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.s32 %rd5, %r6, 8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd6, %rd4, %rd5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.global.v4.u16 [%rd6], {%rs1, %rs1, %rs1, %rs1};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $L__BB66_7:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ret;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!cat </span><span class="token string" style="color:#e3116c">&quot;./trace/{tracedir}/kernel/{kernel_dir}/probed.ptx&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    .version 8.4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .target sm_80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .address_size 64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .extern .func __assertfail</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    (</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .b64 __assertfail_param_0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .b64 __assertfail_param_1,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .b32 __assertfail_param_2,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .b64 __assertfail_param_3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .b64 __assertfail_param_4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_1[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_2[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_3[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_4[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_5[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_6[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_7[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_8[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_9[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_10[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_11[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_12[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_13[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_14[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_15[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_16[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_17[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_18[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_19[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 __unnamed_20[15] = {99, 97, 115, 116, 95, 97, 110, 100, 95, 115, 116, 111, 114, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 _ZN44_INTERNAL_14555b67_13_FillKernel_cu_e561d9726thrust20THRUST_200302_800_NS6system6detail10sequential3seqE[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 _ZN44_INTERNAL_14555b67_13_FillKernel_cu_e561d9724cuda3std3__48in_placeE[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 _ZN44_INTERNAL_14555b67_13_FillKernel_cu_e561d9724cuda3std6ranges3__45__cpo4swapE[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 $str$5[6] = {102, 97, 108, 115, 101};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .global .align 1 .b8 $str$6[58] = {47, 104, 111, 109, 101, 47, 104, 117, 97, 110, 103, 115, 48, 47, 119, 111, 114, 107, 100, 105, 114, 47, 100, 105, 115, 116, 47, 112, 121, 116, 111, 114, 99, 104, 47, 99, 49, 48, 47, 99, 111, 114, 101, 47, 68, 121, 110, 97, 109, 105, 99, 67, 97, 115, 116, 46, 104};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .visible .entry _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1_(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .u32 _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_0,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .align 2 .b8 _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_1[2],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .align 8 .b8 _ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_2[8],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .param .u64 param_block_sched</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .maxntid 128, 1, 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b64 %lstart; // local start time (unit: cycle)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b64 %lend;    // local end time (unit: cycle)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b64 %elapsed; // thread elapsed time in u64</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b32 %elapse;  // thread elapsed time in u32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov.u64 %lstart, %clock64;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // begin buffer calculation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b32   %warpbuf&lt;21&gt;;                   // b32 reg to record access, will be optimized by ptxas</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .pred  %leader;                        // predicate register</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .pred  %joint_pred;                    // used to store AND result of %leader and instruction operand</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov.u32     %warpbuf2, %laneid;             // read lane id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setp.eq.u32 %leader, %warpbuf2, 0;          // check if thread is warp leader</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf3, %nwarpid;       // warpDim := number of warp in current group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf4, %tid.x;         // threadIdx.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf5, %tid.y;         // threadIdx.y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf6, %tid.z;         // threadIdx.z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf7, %ntid.x;        // blockDim.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf8, %ntid.y;        // blockDim.y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf18, %ntid.z;       // blockDim.z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf9, %ctaid.x;       // blockIdx.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf10, %ctaid.y;      // blockIdx.y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf11, %ctaid.z;      // blockIdx.z</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf12, %nctaid.x;     // gridDim.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u32 %warpbuf13, %nctaid.y;     // gridDim.y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mad.lo.s32 %warpbuf14, %warpbuf8,  %warpbuf6,  %warpbuf5;  // blockDim.y * threadIdx.z + threadIdx.y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mad.lo.s32 %warpbuf15, %warpbuf14, %warpbuf7,  %warpbuf4;  // thread_idx = (blockDim.y * threadIdx.z + threadIdx.y) * blockDim.x + threadIdx.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader div.s32 %warpbuf15, %warpbuf15, 32;                        // get persistent warpid instead of dynamic %warpid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mad.lo.s32 %warpbuf16, %warpbuf13, %warpbuf11, %warpbuf10; // gridDim.y * blockIdx.z + blockIdx.y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mad.lo.s32 %warpbuf17, %warpbuf16, %warpbuf12, %warpbuf9;  // block_idx = (gridDim.y * blockIdx.z + blockIdx.y) * gridDim.x + blockIdx.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mul.lo.s32 %warpbuf19, %warpbuf7, %warpbuf8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mul.lo.s32 %warpbuf20, %warpbuf19, %warpbuf18;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader div.s32 %warpbuf20, %warpbuf20, 32;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mad.lo.s32 %warpbuf1,  %warpbuf17, %warpbuf20,  %warpbuf15; // buf_idx = block_idx * warpSize + warpIdx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // end buffer calculation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // begin block_sched buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b64 %buf_block_sched&lt;5&gt;;                          // register group defn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mul.wide.s32  %buf_block_sched4, %warpbuf1, 16; // get buffer location, no_bytes is per thread</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader ld.param.u64  %buf_block_sched3, [param_block_sched];        // load address from .param state space</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader cvta.to.global.u64 	%buf_block_sched2, %buf_block_sched3;    // convert address to .global state space</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader add.s64 %buf_block_sched1, %buf_block_sched2, %buf_block_sched4;  // offset to get final thread-specific address</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // end block_sched buffer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .pred %p&lt;6&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b16 %rs&lt;2&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b32 %r&lt;19&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    .reg .b64 %rd&lt;15&gt;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.param.u16 %rs1, [_ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.param.u64 %rd2, [_ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_2];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ld.param.u32 %r4, [_ZN2at6native29vectorized_elementwise_kernelILi4ENS0_11FillFunctorIN3c104HalfEEENS_6detail5ArrayIPcLi1EEEEEviT0_T1__param_0];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov.u32 %r5, %ctaid.x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    shl.b32 %r1, %r5, 9;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sub.s32 %r2, %r4, %r1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setp.lt.s32 %p1, %r2, 512;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cvta.to.global.u64 %rd1, %rd2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%p1 bra $L__BB66_2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bra.uni $L__BB66_1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $L__BB66_2:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov.u32 %r7, %tid.x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setp.ge.s32 %p2, %r7, %r2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r3, %r7, 384;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%p2 bra $L__BB66_7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r9, %r7, 128;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setp.ge.s32 %p3, %r9, %r2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r10, %r7, %r1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.u32 %rd7, %r10, 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd8, %rd1, %rd7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.global.u16 [%rd8], %rs1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%p3 bra $L__BB66_7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r12, %r7, 256;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setp.ge.s32 %p4, %r12, %r2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r14, %r10, 128;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.u32 %rd9, %r14, 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd10, %rd1, %rd9;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.global.u16 [%rd10], %rs1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%p4 bra $L__BB66_7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r17, %r10, 256;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.u32 %rd11, %r17, 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd12, %rd1, %rd11;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.global.u16 [%rd12], %rs1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    setp.ge.s32 %p5, %r3, %r2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%p5 bra $L__BB66_7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s32 %r18, %r3, %r1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.u32 %rd13, %r18, 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd14, %rd1, %rd13;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.global.u16 [%rd14], %rs1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bra.uni $L__BB66_7;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $L__BB66_1:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.s32 %rd3, %r1, 2;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd4, %rd1, %rd3;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mov.u32 %r6, %tid.x;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mul.wide.s32 %rd5, %r6, 8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    add.s64 %rd6, %rd4, %rd5;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    st.global.v4.u16 [%rd6], {%rs1, %rs1, %rs1, %rs1};</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    $L__BB66_7:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader mov.u64 %lend, %clock64;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader sub.u64 %elapsed, %lend, %lstart; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader cvt.u32.u64 %elapse, %elapsed; // convert to u32</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader st.global.u64 [%buf_block_sched1], %lstart;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader add.s64 %buf_block_sched1, %buf_block_sched1, 8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader st.global.v2.u32 [%buf_block_sched1],  { %elapse,  %smid };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @%leader add.s64 %buf_block_sched1, %buf_block_sched1, 8;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ret;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Here we can the global definition are kept and the probe engine make following modification:</p>
<ol>
<li>A parameter <code>.param .u64 param_block_sched</code> is added</li>
<li>Probes added at corresponding places, i.e., kernel start and end</li>
<li>Buffer calculation in <code>// begin buffer calculation</code> and <code>// begin block_sched buffer</code></li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="callback-for-runtime-analysis">callback for runtime analysis<a href="#callback-for-runtime-analysis" class="hash-link" aria-label="Direct link to callback for runtime analysis" title="Direct link to callback for runtime analysis">​</a></h2>
<p>Upon here, the last question is how the <code>No.block:32768 Running:602241 Scheduling:87713(cycle)</code> is analyzed and printed.</p>
<p>First, Neutrino will save all raw traces in the <code>result</code> directory.
Raw traces are of raw binary and is orderly named by the TIME since the driver starts.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!ls </span><span class="token string" style="color:#e3116c">&quot;./trace/{tracedir}/result/&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">0.660526.bin</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To convert the raw binary into valuable analyzed results, Neutrino provides analyze_hook for user to register in the <code>probe.toml</code>.
For example, here we register the <code>block_sched.py</code> as the analyze hook. Relative paths will be resolved based on <code>tools/</code> directory of installation folder.</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">!cat </span><span class="token string" style="color:#e3116c">&quot;./trace/{tracedir}/probe.toml&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-toml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-toml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key property" style="color:#36acaa">author</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Neutrino Team&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key property" style="color:#36acaa">description</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Record start timestamp, elapsed time and smid of each warp\ncan be reduced to NSight Occupancy and launch__waves_per_multiprocessor\nThis is the same as block_sched but use local timer for better accuracy\nwhile sacrifies the auto alignment from gloabl timer&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key property" style="color:#36acaa">analyze_hook</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;block_sched.py&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token table class-name">block_sched</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key property" style="color:#36acaa">position</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;kernel&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key property" style="color:#36acaa">datamodel</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;warp:16&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key property" style="color:#36acaa">before</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;.reg .b64 %lstart; // local start time (unit: cycle)\n.reg .b64 %lend;    // local end time (unit: cycle)\n.reg .b64 %elapsed; // thread elapsed time in u64\n.reg .b32 %elapse;  // thread elapsed time in u32\nmov.u64 %lstart, %clock64;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key property" style="color:#36acaa">after</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;mov.u64 %lend, %clock64;\nsub.u64 %elapsed, %lend, %lstart; \ncvt.u32.u64 %elapse, %elapsed; // convert to u32\nSAVE.u64 {%lstart}; // store start in u64 for alignment\nSAVE.u32 {%elapse, %smid}; // store elapased time and core id&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Real code of block_sched.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">!cat </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dirname</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">neutrino</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">__file__</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;tools&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;block_sched.py&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Neutrino Generated Code for Reading Trace</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> struct</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> typing </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> NamedTuple</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Tuple</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> neutrino </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> TraceHeader</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TraceSection</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">block_sched</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">NamedTuple</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        lstart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        elapse</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        smid</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token builtin">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">with</span><span class="token plain"> </span><span class="token builtin">open</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">path</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;rb&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        header</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> TraceHeader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> TraceHeader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">struct</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unpack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;iiiiiiii&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sections</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">TraceSection</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> _ </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">numProbes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> offset </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unpack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;QQ&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sections</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">TraceSection</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> offset</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        gridSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gridDimX </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gridDimY  </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gridDimZ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        blockSize </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">blockDimX </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">blockDimY </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> header</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">blockDimZ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        records</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">List</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">block_sched</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> i </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">gridSize</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            records</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> j </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">blockSize </span><span class="token operator" style="color:#393A34">//</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                lstart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> elapse</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> smid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> struct</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">unpack</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;QII&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> f</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">16</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                records</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">block_sched</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">lstart</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> elapse</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> smid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> header</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sections</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> records</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># END OF GENERATED CODE</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> sys</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> numpy </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> np</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    header</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> sections</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> records </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sys</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">argv</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># filled by path to trace</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    unique_sms </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> records</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        unique_sms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">add</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">block</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">smid</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sm_timelines </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> _ </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token builtin">range</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unique_sms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sm_timelines</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sched_times </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unique_sms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    work_times </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">unique_sms</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> cur </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> records</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># print(sm_timelines[cur[0].smid])</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        sched_out </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">False</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        smid </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">smid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">sm_timelines</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">smid</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> block </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> sm_timelines</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">smid</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lstart </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elapse </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lstart</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic"># if cur[0].lstart - (block.lstart + block.elapse) &lt; 100000:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token comment" style="color:#999988;font-style:italic">#     print(cur[0], block)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    sched_times</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">smid</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lstart </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">lstart </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> block</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elapse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    sm_timelines</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">smid</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">remove</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">block</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    sm_timelines</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">smid</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    work_times</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">smid</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elapse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    sched_out </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">True</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">not</span><span class="token plain"> sched_out</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    sm_timelines</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">smid</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    work_times</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">smid</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elapse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            sm_timelines</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">smid</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">append</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">cur</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            work_times</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">smid</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain"> cur</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">elapse</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;No.block:</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">header</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">gridDimX </span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation"> header</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">gridDimY  </span><span class="token string-interpolation interpolation operator" style="color:#393A34">*</span><span class="token string-interpolation interpolation"> header</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">gridDimZ</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> Running:</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation builtin">int</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">np</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">array</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">work_times</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">mean</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> Scheduling:</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation builtin">int</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">np</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">array</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation">sched_times</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">mean</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">(</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">)</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">(cycle)&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>There are two part of the code, separated by <code># END OF GENERATED CODE</code>:</p>
<ul>
<li>1st part is the trace reading code auto-generated by Neutrino (see <code>process.log</code> above) that are used to read <code>.bin</code> traces into Python objects familiar to developers.</li>
<li>2nd part is the analyze code built upon the <code>parse</code> written by developers. Here we simulate a FIFO scheduler based on traces collected, and print and calculate the scheduling times.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/neutrino-gpu/neutrino/docs/docs/probes/trace.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/probes/model"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Probe Execution Model</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/reference-and-internals"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Reference and Internals</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#structure-overview" class="table-of-contents__link toc-highlight">Structure Overview</a></li><li><a href="#eventlog-from-hook-driver" class="table-of-contents__link toc-highlight">event.log from hook driver</a></li><li><a href="#kernel-by-probing-engine" class="table-of-contents__link toc-highlight">kernel/ by probing engine</a></li><li><a href="#callback-for-runtime-analysis" class="table-of-contents__link toc-highlight">callback for runtime analysis</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/neutrino-gpu/neutrino" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Neutrino Team. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>